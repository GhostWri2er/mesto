(()=>{"use strict";class e{constructor(e,t){this._form=t,this._settings=e,this._inputList=this._form.querySelectorAll(this._settings.inputSelector),this._submitButtonElement=this._form.querySelector(this._settings.submitButtonSelector)}_getErrorElement(e){return e.closest(this._settings.popupSection).querySelector(this._settings.inputErrorClass)}_getLineElement(e){return e.closest(this._settings.popupSection).querySelector(this._settings.inputSelector)}_showError(e,t){const s=this._getErrorElement(e),n=this._getLineElement(e);s.textContent=t,s.classList.add(this._settings.errorClass),n.classList.add(this._settings.inputLineRed)}_hideError(e){const t=this._getErrorElement(e),s=this._getLineElement(e);t.textContent="",t.classList.remove(this._settings.errorClass),s.classList.remove(this._settings.inputLineRed)}_checkValidity(e){const t=!e.validity.valid,s=e.validationMessage;t?this._showError(e,s):this._hideError(e)}disabledSubmitButton(){this._submitButtonElement.classList.add(this._settings.inactiveButtonClass),this._submitButtonElement.setAttribute("disabled",!0)}_toggleButtonState(){Array.from(this._inputList).some((e=>!e.validity.valid))?this.disabledSubmitButton():(this._submitButtonElement.classList.remove(this._settings.inactiveButtonClass),this._submitButtonElement.removeAttribute("disabled"))}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideError(e)}))}}const t=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],s={formSelector:".popup__form-edit",inputSelector:".popup__input",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button-save_inactive",inputErrorClass:".popup__input-error",errorClass:"popup__input-error_active",popupSection:".popup__block",inputLineRed:"popup__input_line_red"},n=document.querySelector(".profile-popup"),i=document.querySelector(".profile__edit-button"),r=(document.querySelector(".profile__name"),document.querySelector(".profile__description"),document.querySelector(".popup__form-edit")),o=r.querySelector(".popup__input-name"),l=r.querySelector(".popup__input-description"),a=(document.querySelector(".profile__name"),document.querySelector(".profile__description"),document.querySelector(".profile__add-button")),c=document.querySelector(".popup_add"),u=c.querySelector(".popup__container_add"),d=u.querySelector(".popup__input-name_add"),p=u.querySelector(".popup__input-description_add"),_=u.querySelector(".popup__form-edit_add"),h=(document.querySelector(".template").content,document.querySelector(".grid-cards")),m=(document.querySelectorAll(".popup"),document.querySelector(".popup__img-FullScreen")),S=document.querySelector(".popup__name-FullScreen"),v=document.querySelector(".popup-FullScreen");class g{constructor(e,t,s){this._name=e.name,this._link=e.link,this._handleCardClick=s,this._template=document.querySelector(t).content}_handelLike=()=>{this._likeButton.classList.toggle("card__like_active")};_handleDelete(e){e.target.closest(".grid-cards__item").remove()}_setEventListeners(){this._deleteButton.addEventListener("click",this._handleDelete),this._likeButton.addEventListener("click",this._handelLike),this._imageCard.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}getCardElement(){return this._itemCard=this._template.cloneNode(!0),this._imageCard=this._itemCard.querySelector(".card__image"),this._deleteButton=this._itemCard.querySelector(".card__button-delete"),this._likeButton=this._itemCard.querySelector(".card__like"),this._itemCard.querySelector(".card__name").textContent=this._name,this._imageCard.src=this._link,this._imageCard.alt=this._name,this._setEventListeners(),this._itemCard}}class E{constructor(e){this._popupSelector=e,this._handleEscClose=this._handleEscClose.bind(this)}open(){document.addEventListener("keydown",this._handleEscClose),this._popupSelector.classList.add("popup_opened")}close(){document.removeEventListener("keydown",this._handleEscClose),this._popupSelector.classList.remove("popup_opened")}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupSelector.addEventListener("mousedown",(e=>{e.target.classList.contains("popup_opened")&&this.close(),e.target.classList.contains("popup__close")&&this.close()}))}}class y extends E{constructor(e,{handlerFormSubmit:t}){super(e),this._handlerFormSubmit=t}_getInputValues(){return this._inputList=this._popupSelector.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupSelector.addEventListener("submit",(e=>{e.preventDefault(),this._handlerFormSubmit(this._getInputValues()),this.close()}))}}console.log("Hello, World!");const L=new class extends E{constructor(e){super(e)}open(e,t){super.open(),m.src=t,m.alt=`Изображение ${e}`,S.textContent=e}}(v),b=(e,t)=>{L.open(e,t)};function C(e){return new g(e,"#template",b).getCardElement()}L.setEventListeners();const f=new class{constructor({items:e,renderer:t},s){this._initialArray=e,this._renderer=t,this._container=s}renderCards(e){e.forEach((e=>{this._renderer(e)}))}addItems(e){this._container.prepend(e)}}({items:t,renderer:e=>{const t=C(e);f.addItems(t)}},h);f.renderCards(t);const k=new y(c,{handlerFormSubmit:()=>{const e=C({name:d.value,link:p.value});f.addItems(e)}});k.setEventListeners();const q=new y(n,{handlerFormSubmit:e=>{B.setUserInfo(e.name,e.description)}});i.addEventListener("click",(()=>{const{name:e,description:t}=B.getUserInfo();q.open(),o.value=e,l.value=t,x.disabledSubmitButton()})),q.setEventListeners(),a.addEventListener("click",(()=>{k.open(),_.reset(),w.resetValidation(),w.disabledSubmitButton()}));const B=new class{constructor({userName:e,aboutUser:t}){this._name=document.querySelector(e),this._description=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(e,t){this._name.textContent=e,this._description.textContent=t}}({userName:".profile__name",aboutUser:".profile__description"});console.log(B);const x=new e(s,n),w=new e(s,c);x.enableValidation(),w.enableValidation()})();